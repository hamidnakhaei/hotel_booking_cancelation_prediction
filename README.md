# Prediction of hotel booking cancellations using Machine Learning algorithms 
Canceling hotel reservations by customers is a common occurrence and happens frequently. This introduces uncertainty in revenue management and demand forecasting for hotel managers and also creates numerous other issues. Therefore, having a prediction of the likelihood of a reservation cancellation can significantly aid the hotel. In this project, we aim to use machine learning methods to predict hotel reservation cancellations. \
Initially, various charts and statistical hypothesis tests are used to identify relationships between variables. Then, a logistic regression model is introduced and interpreted for predicting cancellations. Finally, decision tree and random forest models are created for the same purpose. \
# Data
This data set contains booking information for a city hotel and a resort hotel, and includes information such as when the booking was made, length of stay, the number of adults, children, and/or babies, and the number of available parking spaces, among other things. \
The data is originally from the article [Hotel Booking Demand Datasets](https://www.sciencedirect.com/science/article/pii/S2352340918315191), written by Nuno Antonio, Ana Almeida, and Luis Nunes for Data in Brief, Volume 22, February 2019. \
The data set is downloaded from [kaggle](https://www.kaggle.com/code/marcuswingen/eda-of-bookings-and-ml-to-predict-cancelations).
# Data Preparation and Descriptive Analysis
In this section, we take a closer look at the dataset and make necessary corrections if needed. New variables that will be used in the models later are also defined. The goal of this section is to prepare and conduct a descriptive analysis of the dataset; to get a sense of the overall dataset and visually observe the factors affecting cancellations before moving into modeling.
# Logistic Regression Model
In this section, the logistic regression model for predicting cancellations is introduced. Since hotels H1 and H2 are two separate hotels with different purposes, a separate model is created for each hotel. This is essentially the stratification of the dataset.
# Decision Tree
This section presents the decision tree model for predicting cancellations in each hotel. Before forming the model, the best value for the parameter `cp` is determined using cross-validation applied to the training data. Given that accuracy continually increases with decreasing `cp`, a value is chosen for this parameter that is large enough while still maintaining good accuracy. The model is then formed using this value, and the relevant metrics are calculated by applying it to the test data.
# Random Forest
In this section, we predict the cancellation of hotel reservations using the random forest model. Given the model's insensitivity to parameter values, the value of `mtry` is set to the square root of the number of columns in the training data. Additionally, `node size` and `ntree` are set to 10 and 400, respectively (although the number of trees is usually set to 500, due to the large volume of data, 400 is chosen for the number of trees).
# Conclusion
The tables below provide a summary of the models obtained by different methods for the two hotels. For the Resort Hotel (H1) data, both the logistic regression and decision tree models perform well; however, the random forest model has low sensitivity, indicating poor performance in identifying actual cancellations. On the other hand, for the City Hotel (H2) data, the random forest model outperforms the other two methods, not only achieving high accuracy but also offering good sensitivity. \
Evaliuation metrics for H1 hotel \
![](https://github.com/hamidnakhaei/hotel_booking_cancelation_prediction/blob/2a1e3c31903456aa5eda297d7b7926e0fe6354de/Fig/h1.png) \
Evaliuation metrics for H2 hotel \
![](https://github.com/hamidnakhaei/hotel_booking_cancelation_prediction/blob/2a1e3c31903456aa5eda297d7b7926e0fe6354de/Fig/h1.png)
As observed, model accuracy reaches up to 85%. These results indicate that hotel managers can identify reservations likely to be canceled by employing data mining techniques and can prevent cancellations by offering incentives such as discounts, tickets to attractions, etc.

Among the important variables in both logistic regression and decision tree methods was lead time, with higher values indicating a stronger probability of cancellation. To reduce the impact of this variable on increasing cancellations, hotel managers can offer special discounts for early reservations, thus discouraging customers from canceling their reservations.

In the regression model for both hotels, it is observed that customers who make reservations through online travel agencies are more likely to cancel. This is also seen in the decision trees. Since most customers visit the hotelâ€™s website before finalizing their reservation on travel agencies to compare prices or view photos, hotel managers should use appropriate marketing strategies to attract customers to book through their website. For instance, they could offer special services exclusive to direct bookings. The advantage of booking through the website is that hotel managers have direct access to customer information and can communicate with them before arrival; this reduces the likelihood of the customer canceling the reservation. For example, sending personalized messages or providing information about the hotel's location and nearby attractions.
